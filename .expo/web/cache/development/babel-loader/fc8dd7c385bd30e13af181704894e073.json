{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { useEffect, useState, useMemo } from 'react';\nimport I18nManager from \"react-native-web/dist/exports/I18nManager\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { calculateDropdownHeight } from \"../helpers/calculateDropdownHeight\";\nimport { useKeyboardRemainingScreenHeight } from \"./useKeyboardRemainingScreenHeight\";\nvar _Dimensions$get = Dimensions.get('window'),\n  height = _Dimensions$get.height;\nexport var useLayoutDropdown = function useLayoutDropdown(data, dropdownStyle, rowStyle, search) {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isVisible = _useState2[0],\n    setIsVisible = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    buttonLayout = _useState4[0],\n    setButtonLayout = _useState4[1];\n  var _useState5 = useState(0),\n    _useState6 = _slicedToArray(_useState5, 2),\n    dropdownPX = _useState6[0],\n    setDropdownPX = _useState6[1];\n  var _useState7 = useState(0),\n    _useState8 = _slicedToArray(_useState7, 2),\n    dropdownPY = _useState8[0],\n    setDropdownPY = _useState8[1];\n  var _useState9 = useState(function () {\n      return calculateDropdownHeight(dropdownStyle, rowStyle, (data == null ? void 0 : data.length) || 0, search);\n    }),\n    _useState10 = _slicedToArray(_useState9, 2),\n    dropdownHEIGHT = _useState10[0],\n    setDropdownHEIGHT = _useState10[1];\n  var _useState11 = useState(0),\n    _useState12 = _slicedToArray(_useState11, 2),\n    dropdownWIDTH = _useState12[0],\n    setDropdownWIDTH = _useState12[1];\n  var remainigHeightAvoidKeyboard = useKeyboardRemainingScreenHeight();\n  var safeDropdownViewUnderKeyboard = rowStyle && rowStyle.height ? rowStyle.height * 3 : 50 * 3;\n  useEffect(function () {\n    setDropdownHEIGHT(calculateDropdownHeight(dropdownStyle, rowStyle, (data == null ? void 0 : data.length) || 0, search));\n  }, [dropdownStyle, rowStyle, data]);\n  var onDropdownButtonLayout = function onDropdownButtonLayout(w, h, px, py) {\n    setButtonLayout({\n      w: w,\n      h: h,\n      px: px,\n      py: py\n    });\n    if (height - 18 < py + h + dropdownHEIGHT) {\n      setDropdownPX(px);\n      setDropdownPY(py - 2 - dropdownHEIGHT);\n    } else {\n      setDropdownPX(px);\n      setDropdownPY(py + h + 2);\n    }\n    setDropdownWIDTH((dropdownStyle == null ? void 0 : dropdownStyle.width) || w);\n  };\n  var getItemLayout = function getItemLayout(flatlistData, index) {\n    return {\n      index: index,\n      length: (flatlistData == null ? void 0 : flatlistData.length) || 0,\n      offset: rowStyle && rowStyle.height ? rowStyle.height * index : 50 * index\n    };\n  };\n  var dropdownWindowStyle = useMemo(function () {\n    var top = remainigHeightAvoidKeyboard < dropdownPY + safeDropdownViewUnderKeyboard ? remainigHeightAvoidKeyboard - safeDropdownViewUnderKeyboard : dropdownPY;\n    return _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, {\n      borderTopWidth: 0,\n      overflow: 'hidden'\n    }), dropdownStyle), {\n      position: 'absolute',\n      top: top,\n      height: dropdownHEIGHT,\n      width: dropdownWIDTH\n    }), I18nManager.isRTL ? {\n      right: (dropdownStyle == null ? void 0 : dropdownStyle.right) || dropdownPX\n    } : {\n      left: (dropdownStyle == null ? void 0 : dropdownStyle.left) || dropdownPX\n    });\n  }, [dropdownStyle, remainigHeightAvoidKeyboard, dropdownPX, dropdownPY, dropdownHEIGHT, dropdownWIDTH]);\n  return {\n    isVisible: isVisible,\n    setIsVisible: setIsVisible,\n    buttonLayout: buttonLayout,\n    onDropdownButtonLayout: onDropdownButtonLayout,\n    getItemLayout: getItemLayout,\n    dropdownWindowStyle: dropdownWindowStyle\n  };\n};","map":{"version":3,"names":["useEffect","useState","useMemo","calculateDropdownHeight","useKeyboardRemainingScreenHeight","Dimensions","get","height","useLayoutDropdown","data","dropdownStyle","rowStyle","search","isVisible","setIsVisible","buttonLayout","setButtonLayout","dropdownPX","setDropdownPX","dropdownPY","setDropdownPY","length","dropdownHEIGHT","setDropdownHEIGHT","dropdownWIDTH","setDropdownWIDTH","remainigHeightAvoidKeyboard","safeDropdownViewUnderKeyboard","onDropdownButtonLayout","w","h","px","py","width","getItemLayout","flatlistData","index","offset","dropdownWindowStyle","top","borderTopWidth","overflow","position","I18nManager","isRTL","right","left"],"sources":["/Users/p.marasca/Desktop/Tu-Store/node_modules/react-native-select-dropdown/src/hooks/useLayoutDropdown.js"],"sourcesContent":["import {useEffect, useState, useMemo} from 'react';\nimport {I18nManager, Dimensions} from 'react-native';\nimport {calculateDropdownHeight} from '../helpers/calculateDropdownHeight';\nimport {useKeyboardRemainingScreenHeight} from './useKeyboardRemainingScreenHeight';\nconst {height} = Dimensions.get('window');\n\nexport const useLayoutDropdown = (data, dropdownStyle, rowStyle, search) => {\n  const [isVisible, setIsVisible] = useState(false); // dropdown visible ?\n  const [buttonLayout, setButtonLayout] = useState(null);\n  const [dropdownPX, setDropdownPX] = useState(0); // position x\n  const [dropdownPY, setDropdownPY] = useState(0); // position y\n  const [dropdownHEIGHT, setDropdownHEIGHT] = useState(() => {\n    return calculateDropdownHeight(dropdownStyle, rowStyle, data?.length || 0, search);\n  }); // dropdown height\n  const [dropdownWIDTH, setDropdownWIDTH] = useState(0); // dropdown width\n  const remainigHeightAvoidKeyboard = useKeyboardRemainingScreenHeight();\n  const safeDropdownViewUnderKeyboard = rowStyle && rowStyle.height ? rowStyle.height * 3 : 50 * 3;\n\n  useEffect(() => {\n    setDropdownHEIGHT(calculateDropdownHeight(dropdownStyle, rowStyle, data?.length || 0, search));\n  }, [dropdownStyle, rowStyle, data]);\n\n  const onDropdownButtonLayout = (w, h, px, py) => {\n    setButtonLayout({w, h, px, py});\n    if (height - 18 < py + h + dropdownHEIGHT) {\n      setDropdownPX(px);\n      setDropdownPY(py - 2 - dropdownHEIGHT);\n    } else {\n      setDropdownPX(px);\n      setDropdownPY(py + h + 2);\n    }\n    setDropdownWIDTH(dropdownStyle?.width || w);\n  };\n\n  const getItemLayout = (flatlistData, index) => ({\n    index,\n    length: flatlistData?.length || 0,\n    offset: rowStyle && rowStyle.height ? rowStyle.height * index : 50 * index,\n  });\n\n  const dropdownWindowStyle = useMemo(() => {\n    const top =\n      remainigHeightAvoidKeyboard < dropdownPY + safeDropdownViewUnderKeyboard\n        ? remainigHeightAvoidKeyboard - safeDropdownViewUnderKeyboard\n        : dropdownPY;\n    return {\n      ...{\n        borderTopWidth: 0,\n        overflow: 'hidden',\n      },\n      ...dropdownStyle,\n      ...{\n        position: 'absolute',\n        top: top,\n        height: dropdownHEIGHT,\n        width: dropdownWIDTH,\n      },\n      ...(I18nManager.isRTL ? {right: dropdownStyle?.right || dropdownPX} : {left: dropdownStyle?.left || dropdownPX}),\n    };\n  }, [dropdownStyle, remainigHeightAvoidKeyboard, dropdownPX, dropdownPY, dropdownHEIGHT, dropdownWIDTH]);\n\n  return {\n    isVisible,\n    setIsVisible,\n    buttonLayout,\n    onDropdownButtonLayout,\n    getItemLayout,\n    dropdownWindowStyle,\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}