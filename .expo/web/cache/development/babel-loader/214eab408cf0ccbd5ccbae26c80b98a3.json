{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport valid from \"card-validator\";\nimport { removeNonNumber, removeLeadingSpaces } from \"./Utilities\";\nimport pick from \"lodash.pick\";\nvar limitLength = function limitLength() {\n  var string = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  var maxLength = arguments.length > 1 ? arguments[1] : undefined;\n  return string.substr(0, maxLength);\n};\nvar addGaps = function addGaps() {\n  var string = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  var gaps = arguments.length > 1 ? arguments[1] : undefined;\n  var offsets = [0].concat(gaps).concat([string.length]);\n  return offsets.map(function (end, index) {\n    if (index === 0) return \"\";\n    var start = offsets[index - 1];\n    return string.substr(start, end - start);\n  }).filter(function (part) {\n    return part !== \"\";\n  }).join(\" \");\n};\nvar FALLBACK_CARD = {\n  gaps: [4, 8, 12],\n  lengths: [16],\n  code: {\n    size: 3\n  }\n};\nvar CCFieldFormatter = _createClass(function CCFieldFormatter(displayedFields) {\n  var _this = this;\n  _classCallCheck(this, CCFieldFormatter);\n  this.formatValues = function (values) {\n    var card = valid.number(values.number).card || FALLBACK_CARD;\n    return pick({\n      type: card.type,\n      number: _this._formatNumber(values.number, card),\n      expiry: _this._formatExpiry(values.expiry),\n      cvc: _this._formatCVC(values.cvc, card),\n      name: removeLeadingSpaces(values.name),\n      postalCode: removeNonNumber(values.postalCode)\n    }, _this._displayedFields);\n  };\n  this._formatNumber = function (number, card) {\n    var numberSanitized = removeNonNumber(number);\n    var maxLength = card.lengths[card.lengths.length - 1];\n    var lengthSanitized = limitLength(numberSanitized, maxLength);\n    var formatted = addGaps(lengthSanitized, card.gaps);\n    return formatted;\n  };\n  this._formatExpiry = function (expiry) {\n    var sanitized = limitLength(removeNonNumber(expiry), 4);\n    if (sanitized.match(/^[2-9]$/)) {\n      return \"0\" + sanitized;\n    }\n    if (sanitized.length > 2) {\n      return sanitized.substr(0, 2) + \"/\" + sanitized.substr(2, sanitized.length);\n    }\n    return sanitized;\n  };\n  this._formatCVC = function (cvc, card) {\n    var maxCVCLength = card.code.size;\n    return limitLength(removeNonNumber(cvc), maxCVCLength);\n  };\n  this._displayedFields = [].concat(_toConsumableArray(displayedFields), [\"type\"]);\n});\nexport { CCFieldFormatter as default };","map":{"version":3,"names":["valid","removeNonNumber","removeLeadingSpaces","pick","limitLength","string","maxLength","substr","addGaps","gaps","offsets","concat","length","map","end","index","start","filter","part","join","FALLBACK_CARD","lengths","code","size","CCFieldFormatter","displayedFields","formatValues","values","card","number","type","_formatNumber","expiry","_formatExpiry","cvc","_formatCVC","name","postalCode","_displayedFields","numberSanitized","lengthSanitized","formatted","sanitized","match","maxCVCLength"],"sources":["/Users/p.marasca/Desktop/Tu-Store/node_modules/react-native-credit-card-input/src/CCFieldFormatter.js"],"sourcesContent":["import valid from \"card-validator\";\nimport { removeNonNumber, removeLeadingSpaces } from \"./Utilities\";\nimport pick from \"lodash.pick\";\n\nconst limitLength = (string = \"\", maxLength) => string.substr(0, maxLength);\nconst addGaps = (string = \"\", gaps) => {\n  const offsets = [0].concat(gaps).concat([string.length]);\n\n  return offsets.map((end, index) => {\n    if (index === 0) return \"\";\n    const start = offsets[index - 1];\n    return string.substr(start, end - start);\n  }).filter(part => part !== \"\").join(\" \");\n};\n\nconst FALLBACK_CARD = { gaps: [4, 8, 12], lengths: [16], code: { size: 3 } };\nexport default class CCFieldFormatter {\n  constructor(displayedFields) {\n    this._displayedFields = [...displayedFields, \"type\"];\n  }\n\n  formatValues = (values) => {\n    const card = valid.number(values.number).card || FALLBACK_CARD;\n\n    return pick({\n      type: card.type,\n      number: this._formatNumber(values.number, card),\n      expiry: this._formatExpiry(values.expiry),\n      cvc: this._formatCVC(values.cvc, card),\n      name: removeLeadingSpaces(values.name),\n      postalCode: removeNonNumber(values.postalCode),\n    }, this._displayedFields);\n  };\n\n  _formatNumber = (number, card) => {\n    const numberSanitized = removeNonNumber(number);\n    const maxLength = card.lengths[card.lengths.length - 1];\n    const lengthSanitized = limitLength(numberSanitized, maxLength);\n    const formatted = addGaps(lengthSanitized, card.gaps);\n    return formatted;\n  };\n\n  _formatExpiry = (expiry) => {\n    const sanitized = limitLength(removeNonNumber(expiry), 4);\n    if (sanitized.match(/^[2-9]$/)) { return `0${sanitized}`; }\n    if (sanitized.length > 2) { return `${sanitized.substr(0, 2)}/${sanitized.substr(2, sanitized.length)}`; }\n    return sanitized;\n  };\n\n  _formatCVC = (cvc, card) => {\n    const maxCVCLength = card.code.size;\n    return limitLength(removeNonNumber(cvc), maxCVCLength);\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}